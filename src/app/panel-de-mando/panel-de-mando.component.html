<div class="container">
  <div class="rounded-box p-4">
    <div class="row my-4">
      <div class="col-md-10 offset-md-1">
        <img src="./assets/logo2.png" alt="Logotipo" class="img-fluid tamano">
        <br>
        <h2>Panel de Mando</h2>

        <div class="row g-3 align-items-center">
          <div class="col-auto">
            <label for="collectionSelect" class="form-label">Colección:</label>
            <select id="collectionSelect" class="form-select" (change)="onCollectionChange($event)">
              <option value="" disabled selected>Selecciona una colección</option>
              <option *ngFor="let collection of collections" [value]="collection">{{ collection }}</option>
            </select>
          </div>

          <div class="col-auto">
            <label for="fechaInicio" class="form-label">Fecha Inicio:</label>
            <input type="date" id="fechaInicio" class="form-control" [(ngModel)]="fechaInicio"
              (ngModelChange)="applyDateFilter()" />
          </div>

          <div class="col-auto">
            <label for="fechaFin" class="form-label">Fecha Fin:</label>
            <input type="date" id="fechaFin" class="form-control" [(ngModel)]="fechaFin"
              (ngModelChange)="applyDateFilter()" />
          </div>

          <div class="col-auto">
            <label for="filtrarNombre" class="form-label">Filtrar por nombre:</label>
            <input type="text" id="filtrarNombre" class="form-control" [(ngModel)]="filtrarNombre"
              (ngModelChange)="onNombreChange()" placeholder="Escribe el nombre que vas a filtrar" />
          </div>


          <div class="col-auto">
            <label class="form-label d-block ">&nbsp;</label>
            <button [disabled]="isPrintButtonDisabled" class="btn btn-primary custom-btn-activado"
              (click)="exportExcel()">Imprimir</button>
          </div>
        </div>
      </div>
    </div>

    <div class="row my-4">
      <div class="col-md-10 offset-md-1">
        <div id="tabla-container"
          style=" min-width: 1037px; overflow-y: auto; width: 100%; margin: 0 auto; position: relative;">


          <table *ngIf="selectedCollection === 'encuesta-compromiso-empleados'" class="table table-striped table-hover"
            style="table-layout: fixed;">
            <thead>
              <tr>
                <th style="background-color: #E3EAF2; font-weight: bold;
                                white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
                                width: 50px;
                                word-wrap: break-word;
                                height: 50px;
                                overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
                                text-align: left; /* Alineación a la izquierda para mejor legibilidad */
                                padding: 10px; /* Agrega un poco de padding para espaciado interno */
                                box-sizing: border-box;"><input type="checkbox" class="form-check-input"
                    (change)="toggleAll($event, 'encuesta-compromiso-empleados')"></th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
                                white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
                                width: 90px;
                                word-wrap: break-word;
                                height: 50px;
                                overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
                                text-align: left; /* Alineación a la izquierda para mejor legibilidad */
                                padding: 10px; /* Agrega un poco de padding para espaciado interno */
                                box-sizing: border-box;">Ver más</th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
           white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
           width: 150px;
           word-wrap: break-word;
           height: 50px;
           overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
           text-align: left; /* Alineación a la izquierda para mejor legibilidad */
           padding: 10px; /* Agrega un poco de padding para espaciado interno */
           box-sizing: border-box;">Fecha de Creación</th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
           white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
           width: 150px;
           word-wrap: break-word;
           height: 50px;
           overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
           text-align: left; /* Alineación a la izquierda para mejor legibilidad */
           padding: 10px; /* Agrega un poco de padding para espaciado interno */
           box-sizing: border-box;">Antigüedad</th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
           white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
           width: 150px;
           word-wrap: break-word;
           height: 50px;
           overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
           text-align: left; /* Alineación a la izquierda para mejor legibilidad */
           padding: 10px; /* Agrega un poco de padding para espaciado interno */
           box-sizing: border-box;">Edad</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of encuestaRowData">
                <td><input class="form-check-input" type="checkbox" [(ngModel)]="data.selected"
                    (change)="onCheckboxChange()"></td>
                <td><button class="btn btn-primary custom-btn-activado2" (click)="openModal(data)"><img
                      src="assets/ojo.svg" alt="Icono" width="25" height="25" /></button></td>
                <td>{{ data.f_creado }}</td>
                <td>{{ data.antiguedad }}</td>
                <td>{{ data.edad }}</td>
              </tr>
            </tbody>
          </table>


          <table *ngIf="selectedCollection === 'registro-usuarios-telemedicina'" class="table table-striped table-hover"
            style="table-layout: fixed; width: 100%;">
            <thead>
              <tr>
                <th th style="background-color: #E3EAF2; font-weight: bold;
                                white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
                                width: 50px;
                                word-wrap: break-word;
                                height: 50px;
                                overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
                                text-align: left; /* Alineación a la izquierda para mejor legibilidad */
                                padding: 10px; /* Agrega un poco de padding para espaciado interno */
                                box-sizing: border-box;"><input type="checkbox" class="form-check-input"
                    (change)="toggleAll($event, 'registro-usuarios-telemedicina')"></th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
                                white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
                                width: 90px;
                                word-wrap: break-word;
                                height: 50px;
                                overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
                                text-align: left; /* Alineación a la izquierda para mejor legibilidad */
                                padding: 10px; /* Agrega un poco de padding para espaciado interno */
                                box-sizing: border-box;">Ver más</th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
           white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
           width: 150px;
           word-wrap: break-word;
           height: 50px;
           overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
           text-align: left; /* Alineación a la izquierda para mejor legibilidad */
           padding: 10px; /* Agrega un poco de padding para espaciado interno */
           box-sizing: border-box;">Fecha Creación</th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
           white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
           width: 250px;
           word-wrap: break-word;
           height: 50px;
           overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
           text-align: left; /* Alineación a la izquierda para mejor legibilidad */
           padding: 10px; /* Agrega un poco de padding para espaciado interno */
           box-sizing: border-box;">Nombre</th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
           white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
           width: 120px;
           word-wrap: break-word;
           height: 50px;
           overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
           text-align: left; /* Alineación a la izquierda para mejor legibilidad */
           padding: 10px; /* Agrega un poco de padding para espaciado interno */
           box-sizing: border-box;">Edad</th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
           white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
           width: 250px;
           word-wrap: break-word;
           height: 50px;
           overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
           text-align: left; /* Alineación a la izquierda para mejor legibilidad */
           padding: 10px; /* Agrega un poco de padding para espaciado interno */
           box-sizing: border-box;">Familiares registrados</th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
           white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
           width: 250px;
           word-wrap: break-word;
           height: 50px;
           overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
           text-align: left; /* Alineación a la izquierda para mejor legibilidad */
           padding: 10px; /* Agrega un poco de padding para espaciado interno */
           box-sizing: border-box;">Fecha Ingreso</th>
                <th th style="background-color: #E3EAF2; font-weight: bold;
           white-space: normal; /* Cambia a normal para permitir el ajuste de línea */
           width: 150px;
           word-wrap: break-word;
           height: 50px;
           overflow-wrap: break-word; /* Asegúrate de que esta propiedad también esté presente */
           text-align: left; /* Alineación a la izquierda para mejor legibilidad */
           padding: 10px; /* Agrega un poco de padding para espaciado interno */
           box-sizing: border-box;">Puesto</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of telemedicinaRowData">
                <td> <input class="form-check-input" type="checkbox" [(ngModel)]="data.selected"
                    (change)="onCheckboxChange()"></td>
                <td><button class="btn btn-primary custom-btn-activado2" (click)="openModal(data)">
                    <img src="assets/ojo.svg" alt="Icono" width="25" height="25" />
                  </button>
                </td>
                <td>{{ data.f_creado }}</td>
                <td>{{ data.nombre }}</td>
                <td>{{ data.edad }}</td>
                <td>{{ data.familiares.length }}</td>
                <td>{{ data.fecha_ingreso }}</td>
                <td>{{ data.puesto }}</td>

              </tr>
            </tbody>
          </table>

          <!-- aqui agregas otra tabla, puedes copiar la estructura de arriba y reemplaza los dato con la nueva coleccion -->

        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="infoModalLabel">Detalles del Registro</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form *ngIf="selectedRowData" class="modal-info">

          <div *ngIf="selectedCollection === 'registro-usuarios-telemedicina'" class="modal-info">
            <br>
            <img src="./assets/logo_1.png" alt="Logotipo" class="img-fluid tamano">
            <br>
            <div class="mb-3">
              <label for="correo" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="nombre" [(ngModel)]="selectedRowData.nombre" name="nombre"
                disabled>
            </div>
            <div class="mb-3">
              <label for="edad" class="form-label">Edad</label>
              <input type="text" class="form-control" id="edad" [(ngModel)]="selectedRowData.edad" name="edad" disabled>
            </div>


            <div class="mb-3">
              <label for="fechaCreacion" class="form-label">Fecha de Creación</label>
              <input type="text" class="form-control" id="fechaCreacion" [(ngModel)]="selectedRowData.f_creado"
                name="fechaCreacion" disabled>
            </div>

            <div class="mb-3">
              <label for="correo" class="form-label">Correo</label>
              <input type="text" class="form-control" id="correo" [(ngModel)]="selectedRowData.correo" name="correo"
                disabled>
            </div>

            <div class="mb-3">
              <label for="domicilio" class="form-label">Domicilio</label>
              <input type="text" class="form-control" id="domicilio" [(ngModel)]="selectedRowData.domicilio"
                name="domicilio" disabled>
            </div>

            <div class="mb-3">
              <label for="escolaridad" class="form-label">Escolaridad</label>
              <input type="text" class="form-control" id="escolaridad" [(ngModel)]="selectedRowData.escolaridad"
                name="escolaridad" disabled>
            </div>

            <div class="mb-3">
              <label for="estadoCivil" class="form-label">Estado Civil</label>
              <input type="text" class="form-control" id="estadoCivil" [(ngModel)]="selectedRowData.estado_civil"
                name="estadoCivil" disabled>
            </div>

            <div class="mb-3">
              <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
              <input type="text" class="form-control" id="fechaNacimiento"
                [(ngModel)]="selectedRowData.fecha_nacimiento" name="fechaNacimiento" disabled>
            </div>

            <div class="mb-3">
              <label for="genero" class="form-label">Género</label>
              <input type="text" class="form-control" id="genero" [(ngModel)]="selectedRowData.genero" name="genero"
                disabled>
            </div>

            <div class="mb-3">
              <label for="puesto" class="form-label">Puesto</label>
              <input type="text" class="form-control" id="puesto" [(ngModel)]="selectedRowData.puesto" name="puesto"
                disabled>
            </div>

            <div class="mb-3">
              <label for="fechaIngreso" class="form-label">Fecha de Ingreso</label>
              <input type="text" class="form-control" id="fechaIngreso" [(ngModel)]="selectedRowData.fecha_ingreso"
                name="fechaIngreso" disabled>
            </div>

            <div *ngFor="let familiar of selectedRowData.familiares; let i = index">
              <h5>Familiar {{ i + 1 }}</h5>
              <div class="mb-3">
                <label class="form-label">Nombre del Familiar</label>
                <input type="text" class="form-control" [value]="familiar.nombre_familiar || 'Sin registrar'"
                  name="nombreFamiliar{{i}}" disabled>
              </div>

              <div class="mb-3">
                <label class="form-label">Género del Familiar</label>
                <input type="text" class="form-control" [value]="familiar.genero_familiar || 'Sin registrar'"
                  name="generoFamiliar{{i}}" disabled>
              </div>

              <div class="mb-3">
                <label class="form-label">Fecha de Nacimiento del Familiar</label>
                <input type="text" class="form-control" [value]="familiar.fecha_nacimiento_familiar || 'Sin registrar'"
                  name="fechaNacimientoFamiliar{{i}}" disabled>
              </div>

              <div class="mb-3">
                <label class="form-label">Edad del Familiar</label>
                <input type="text" class="form-control" [value]="familiar.edad_familiar || 'Sin registrar'"
                  name="edadFamiliar{{i}}" disabled>
              </div>

              <div class="mb-3">
                <label class="form-label">Domicilio del Familiar</label>
                <input type="text" class="form-control" [value]="familiar.domicilio_familiar || 'Sin registrar'"
                  name="domicilioFamiliar{{i}}" disabled>
              </div>

              <div class="mb-3">
                <label class="form-label">Escolaridad del Familiar</label>
                <input type="text" class="form-control" [value]="familiar.escolaridad_familiar || 'Sin registrar'"
                  name="escolaridadFamiliar{{i}}" disabled>
              </div>

              <div class="mb-3">
                <label class="form-label">Puesto del Familiar</label>
                <input type="text" class="form-control" [value]="familiar.puesto_familiar || 'Sin registrar'"
                  name="puestoFamiliar{{i}}" disabled>
              </div>

              <div class="mb-3">
                <label class="form-label">Ocupación del Familiar</label>
                <input type="text" class="form-control" [value]="familiar.ocupacion_familiar || 'Sin registrar'"
                  name="ocupacionFamiliar{{i}}" disabled>
              </div>

              <div class="mb-3">
                <label class="form-label">Parentesco con el Familiar</label>
                <input type="text" class="form-control" [value]="familiar.parentesco_familiar || 'Sin registrar'"
                  name="parentescoFamiliar{{i}}" disabled>
              </div>
            </div>
          </div>


          <div *ngIf="selectedCollection === 'encuesta-compromiso-empleados'" class="modal-info">
            <br>
            <img src="./assets/logo.png" alt="Logotipo" class="img-fluid tamano">
            <br>
            <div class="mb-3">
              <label for="edad" class="form-label">Edad</label>
              <input type="text" class="form-control" id="edad" [(ngModel)]="selectedRowData.edad" name="edad" disabled>
            </div>

            <div class="mb-3">
              <label for="fechaCreacion" class="form-label">Fecha de Creación</label>
              <input type="text" class="form-control" id="fechaCreacion" [(ngModel)]="selectedRowData.f_creado"
                name="fechaCreacion" disabled>
            </div>


            <div class="mb-3">
              <label for="q1" class="form-label">Pregunta 1 - ¿Sabes lo que se espera de ti en tu
                trabajo?</label>
              <input type="text" class="form-control" id="q1" [value]="interpretValue(selectedRowData.q1)" name="q1"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q2" class="form-label">Pregunta 2 - ¿Tienes los materiales y equipo para hacer
                correctamente tu trabajo?</label>
              <input type="text" class="form-control" id="q2" [value]="interpretValue(selectedRowData.q2)" name="q2"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q3" class="form-label">Pregunta 3 - ¿Tienes la oportunidad de hacer lo que mejor
                sabes hacer cada día en el trabajo?</label>
              <input type="text" class="form-control" id="q3" [value]="interpretValue(selectedRowData.q3)" name="q3"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q4" class="form-label">Pregunta 4 - En los últimos 7 días ¿Has recibido
                reconocimiento o felicitaciones por hacer un buen trabajo?</label>
              <input type="text" class="form-control" id="q4" [value]="interpretValue(selectedRowData.q4)" name="q4"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q5" class="form-label">Pregunta 5 - ¿Sientes que tu supervisor o alguien se
                preocupa por ti como persona en el trabajo?</label>
              <input type="text" class="form-control" id="q5" [value]="interpretValue(selectedRowData.q5)" name="q5"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q6" class="form-label">Pregunta 6 - ¿Hay alguien que alienta tu desarrollo en el
                trabajo?</label>
              <input type="text" class="form-control" id="q6" [value]="interpretValue(selectedRowData.q6)" name="q6"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q7" class="form-label">Pregunta 7 - ¿Tus opiniones se toman en cuenta en el
                trabajo?</label>
              <input type="text" class="form-control" id="q7" [value]="interpretValue(selectedRowData.q7)" name="q7"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q8" class="form-label">Pregunta 8 - ¿La misión/propósito de tu empresa hace
                sentir que tu trabajo es importante?</label>
              <input type="text" class="form-control" id="q8" [value]="interpretValue(selectedRowData.q8)" name="q8"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q9" class="form-label">Pregunta 9 - ¿Tus compañeros de trabajo están
                comprometidos en hacer un trabajo de calidad?</label>
              <input type="text" class="form-control" id="q9" [value]="interpretValue(selectedRowData.q9)" name="q9"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q10" class="form-label">Pregunta 10 - ¿Tienes un mejor amigo en el
                trabajo?</label>
              <input type="text" class="form-control" id="q10" [value]="interpretValue(selectedRowData.q10)" name="q10"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q11" class="form-label">Pregunta 11 - En los últimos seis meses ¿alguien en el
                trabajo te ha hablado sobre su progreso?</label>
              <input type="text" class="form-control" id="q11" [value]="interpretValue(selectedRowData.q11)" name="q11"
                disabled>
            </div>

            <div class="mb-3">
              <label for="q12" class="form-label">Pregunta 12 - En el último año ¿has tenido la
                oportunidad de aprender y crecer?</label>
              <input type="text" class="form-control" id="q12" [value]="interpretValue(selectedRowData.q12)" name="q12"
                disabled>
            </div>
          </div>

          <!--Aqui agregas otro modal copia el de arriba para tener la misma estructura solo reempalza los datos-->


        </form>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary custom-btn-activado" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
